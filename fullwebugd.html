<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Med-Ledger Nusantara</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #FFFFFF 0%, #F5F5F5 100%);
      min-height: 100vh;
      padding-top: 80px;
    }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #E0F7FA;
      z-index: 1000;
      padding: 0 20px;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 0;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 600;
      color: #455A64;
      font-size: 1.3rem;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      fill: #00BCD4;
    }

    .nav-menu {
      display: flex;
      gap: 30px;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: #455A64;
      font-weight: 500;
      padding: 10px 16px;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .nav-link:hover {
      background: #E0F7FA;
      color: #00BCD4;
    }

    .nav-link.active {
      background: #00BCD4;
      color: white;
    }

    .nav-icon {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .page-content {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 80px);
      padding: 40px 20px;
    }

    .container {
      max-width: 800px;
      
      width: 100%;
      background: #FFFFFF;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 188, 212, 0.1);
      padding: 60px 50px;
    }

    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    .title {
      font-size: 2.5rem;
      font-weight: 600;
      color: #455A64;
      margin-bottom: 20px;
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 1.1rem;
      color: #455A64;
      font-weight: 300;
      line-height: 1.6;
      max-width: 600px;
      margin: 0 auto;
    }

    .form-container {
      margin-top: 50px;
    }

    .form-group {
      margin-bottom: 35px;
    }

    .form-label {
      display: block;
      font-weight: 500;
      color: #455A64;
      font-size: 1.1rem;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .label-icon {
      width: 20px;
      height: 20px;
      fill: #00BCD4;
    }

    .form-input {
      width: 100%;
      padding: 18px 20px;
      font-size: 1rem;
      border: 2px solid #E0F7FA;
      border-radius: 12px;
      background: #F8FFFE;
      color: #455A64;
      transition: all 0.3s ease;
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
    }

    .form-input:focus {
      outline: none;
      border-color: #00BCD4;
      background: #FFFFFF;
      box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.1);
    }

    .form-input::placeholder {
      color: #90A4AE;
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    .submit-section {
      margin-top: 50px;
      text-align: center;
    }

    .submit-btn {
      background: linear-gradient(135deg, #00BCD4 0%, #0097A7 100%);
      color: white;
      border: none;
      padding: 20px 50px;
      font-size: 1.1rem;
      font-weight: 500;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 0 auto;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    .submit-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .blockchain-icon {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .status-indicator {
      margin-top: 30px;
      padding: 20px;
      border-radius: 12px;
      display: none;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-size: 1rem;
      font-weight: 500;
    }

    .status-processing {
      background: #E0F7FA;
      color: #00BCD4;
      border: 2px solid #B2EBF2;
    }

    .status-success {
      background: #E8F5E9;
      color: #2E7D32;
      border: 2px solid #C8E6C9;
    }

    .status-icon {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid #B2EBF2;
      border-top: 2px solid #00BCD4;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .security-note {
      background: linear-gradient(135deg, #E8F5E9 0%, #F1F8E9 100%);
      border: 1px solid #C8E6C9;
      border-radius: 12px;
      padding: 20px;
      margin-top: 40px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .security-icon {
      width: 24px;
      height: 24px;
      fill: #2E7D32;
      flex-shrink: 0;
    }

    .security-text {
      color: #2E7D32;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .hidden-page {
      display: none;
    }

    .input-field {
      width: 100%;
      padding: 18px 20px;
      font-size: 1.1rem;
      border: 2px solid #E0F7FA;
      border-radius: 12px;
      background: #F8FFFE;
      color: #455A64;
      transition: all 0.3s ease;
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
      margin-bottom: 25px;
    }

    .input-field:focus {
      outline: none;
      border-color: #00BCD4;
      background: #FFFFFF;
      box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.1);
    }

    .input-field::placeholder {
      color: #90A4AE;
    }

    .main-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 60px;
      margin: 60px 0;
      flex-wrap: wrap;
    }

    .input-section {
      flex: 1;
      min-width: 300px;
    }

    .verify-btn {
      background: linear-gradient(135deg, #00BCD4 0%, #0097A7 100%);
      color: white;
      border: none;
      padding: 18px 50px;
      font-size: 1.1rem;
      font-weight: 500;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
    }

    .verify-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
    }

    .illustration {
      flex: 0 0 200px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-icon {
      width: 180px;
      height: 120px;
      position: relative;
    }

    .scan-effect {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, transparent 0%, #00BCD4 50%, transparent 100%);
      animation: scan 2s ease-in-out infinite;
    }

    @keyframes scan {
      0% {
        transform: translateY(0);
        opacity: 0;
      }

      50% {
        opacity: 1;
      }

      100% {
        transform: translateY(116px);
        opacity: 0;
      }
    }

    .features {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 50px;
      flex-wrap: wrap;
    }

    .feature {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #455A64;
      font-size: 0.95rem;
    }

    .feature-icon {
      width: 20px;
      height: 20px;
      fill: #00BCD4;
    }

    .data-card {
      background: linear-gradient(135deg, #F8FFFE 0%, #E8F5E9 100%);
      border: 2px solid #E0F7FA;
      border-radius: 20px;
      padding: 50px 40px;
      margin: 50px auto;
      max-width: 700px;
      position: relative;
      box-shadow: 0 5px 20px rgba(0, 188, 212, 0.08);
    }

    .patient-info {
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
      text-align: left;
    }

    .info-row {
      display: flex;
      align-items: center;
      padding: 20px 0;
      border-bottom: 1px solid rgba(0, 188, 212, 0.1);
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: 600;
      color: #455A64;
      font-size: 1.1rem;
      min-width: 200px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .info-value {
      font-weight: 400;
      color: #546E7A;
      font-size: 1.1rem;
      flex: 1;
      padding-left: 20px;
    }

    .critical-value {
      color: #D32F2F;
      font-weight: 500;
    }

    .blood-type {
      color: #C62828;
      font-weight: 600;
      background: rgba(244, 67, 54, 0.1);
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
    }

    .allergy-value {
      color: #F57C00;
      font-weight: 500;
      background: rgba(255, 152, 0, 0.1);
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
    }

    .icon {
      width: 24px;
      height: 24px;
      fill: #00BCD4;
    }

    .verification-badge {
      position: absolute;
      bottom: 20px;
      right: 30px;
      background: #C8E6C9;
      color: #2E7D32;
      padding: 12px 20px;
      border-radius: 25px;
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 2px 10px rgba(46, 125, 50, 0.2);
    }

    .emergency-indicator {
      position: absolute;
      top: -10px;
      left: 30px;
      background: linear-gradient(135deg, #FF5722 0%, #D32F2F 100%);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(255, 87, 34, 0.3);
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .action-btn {
      background: linear-gradient(135deg, #00BCD4 0%, #0097A7 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1rem;
      font-weight: 500;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
    }

    .secondary-btn {
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      color: #2E7D32;
      box-shadow: 0 4px 15px rgba(46, 125, 50, 0.2);
    }

    .secondary-btn:hover {
      box-shadow: 0 6px 20px rgba(46, 125, 50, 0.3);
    }

    .timeline-container {
      position: relative;
      margin: 60px 0;
      padding-left: 40px;
    }

    .timeline-line {
      position: absolute;
      left: 20px;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(to bottom, #00BCD4, #B2EBF2);
      border-radius: 2px;
    }

    .record-card {
      position: relative;
      background: #FFFFFF;
      border: 2px solid #E0F7FA;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0, 188, 212, 0.08);
      transition: all 0.3s ease;
    }

    .record-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0, 188, 212, 0.15);
    }

    .timeline-dot {
      position: absolute;
      left: -49px;
      top: 30px;
      width: 16px;
      height: 16px;
      background: #00BCD4;
      border: 4px solid #FFFFFF;
      border-radius: 50%;
      box-shadow: 0 0 0 3px #E0F7FA;
    }

    .card-content {
      margin-left: 0;
    }

    .record-date {
      color: #00BCD4;
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 8px;
    }

    .record-institution {
      color: #455A64;
      font-weight: 500;
      font-size: 1.1rem;
      margin-bottom: 15px;
    }

    .record-summary {
      color: #546E7A;
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 20px;
      padding: 15px;
      background: #F8FFFE;
      border-radius: 8px;
      border-left: 4px solid #00BCD4;
    }

    .record-hash {
      background: linear-gradient(135deg, #E8F5E9 0%, #F1F8E9 100%);
      border: 1px solid #C8E6C9;
      border-radius: 8px;
      padding: 15px;
    }

    .hash-label {
      color: #2E7D32;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hash-label::before {
      content: "ðŸ”’";
      font-size: 1rem;
    }

    .hash-code {
      font-family: 'Courier New', monospace;
      color: #1B5E20;
      font-size: 0.85rem;
      word-break: break-all;
      background: rgba(255, 255, 255, 0.7);
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid rgba(46, 125, 50, 0.2);
    }

    .history-actions {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 50px;
      flex-wrap: wrap;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .modal-content {
      background: #FFFFFF;
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #455A64;
      margin-bottom: 10px;
    }

    .modal-subtitle {
      color: #546E7A;
      font-size: 1rem;
    }

    .patient-preview {
      background: linear-gradient(135deg, #E0F7FA 0%, #E8F5E9 100%);
      border: 2px solid #B2EBF2;
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
    }

    .preview-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(0, 188, 212, 0.2);
    }

    .preview-row:last-child {
      border-bottom: none;
    }

    .preview-label {
      font-weight: 600;
      color: #455A64;
      font-size: 1rem;
    }

    .preview-value {
      font-weight: 500;
      color: #546E7A;
      font-size: 1rem;
    }

    .modal-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .modal-btn {
      padding: 15px 30px;
      font-size: 1rem;
      font-weight: 500;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
    }

    .confirm-btn {
      background: linear-gradient(135deg, #00BCD4 0%, #0097A7 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
    }

    .confirm-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
    }

    .cancel-btn {
      background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
      color: #455A64;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .cancel-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    @media (max-width: 768px) {
      .container {
        padding: 40px 30px;
      }

      .title {
        font-size: 2rem;
      }

      .submit-btn {
        width: 100%;
        justify-content: center;
      }

      .nav-menu {
        gap: 15px;
      }

      .nav-link {
        padding: 8px 12px;
        font-size: 0.9rem;
      }

      .nav-link span {
        display: none;
      }

      .main-content {
        flex-direction: column;
        gap: 40px;
      }

      .features {
        flex-direction: column;
        gap: 20px;
      }

      .info-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      .info-label {
        min-width: auto;
      }

      .info-value {
        padding-left: 0;
      }

      .verification-badge {
        position: static;
        margin-top: 30px;
        align-self: center;
      }

      .action-buttons {
        flex-direction: column;
        align-items: center;
      }

      .timeline-container {
        padding-left: 30px;
      }

      .timeline-dot {
        left: -39px;
      }

      .record-card {
        padding: 20px;
      }

      .history-actions {
        flex-direction: column;
        align-items: center;
      }

      .modal-content {
        padding: 30px 25px;
        margin: 20px;
      }

      .modal-actions {
        flex-direction: column;
        gap: 10px;
      }

      .modal-btn {
        width: 100%;
      }
    }

    .patient-header {
      background: linear-gradient(135deg, #E0F7FA 0%, #E8F5E9 100%);
      border: 2px solid #B2EBF2;
      border-radius: 15px;
      padding: 20px 25px;
      margin: 20px 0 30px 0;
      text-align: center;
    }

    .patient-label {
      color: #455A64;
      font-weight: 500;
      font-size: 1.1rem;
      margin-right: 10px;
    }

    .patient-name {
      color: #00BCD4;
      font-weight: 600;
      font-size: 1.3rem;
    }

    .form-actions {
      display: flex;
      justify-content: center;
      margin-top: 30px;
    }
  </style>
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <svg class="logo-icon" viewBox="0 0 24 24">
          <path
            d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M17,13H13V17H11V13H7V11H11V7H13V11H17V13Z" />
        </svg>
        <span class="logo-text">Med-Ledger Nusantara</span>
      </div>
      <div class="nav-menu">
        <a href="#" class="nav-link active" onclick="showPage('identification')">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path
              d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
          </svg>
          <span>Identifikasi Pasien</span>
        </a>

        <a href="#" class="nav-link" onclick="showPage('history')">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path
              d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3" />
          </svg>
          <span>Riwayat Medis</span>
        </a>
        <a href="#" class="nav-link" onclick="showPage('record')">
          <svg class="nav-icon" viewBox="0 0 24 24">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
          </svg>
          <span>Catat Rekam Medis</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- Record Page -->
  <div id="recordPage" class="page-content" style="display: none;">
    <div class="container">
      <!-- Step 1: NIK Input Section -->
      <div id="recordNikSection">
        <div class="header">
          <h1 class="title">Catat Rekam Medis Baru</h1>
          <p class="subtitle">Verifikasi identitas pasien sebelum mencatat riwayat baru.</p>
        </div>

        <div class="main-content">
          <div class="input-section">
            <input type="text" class="input-field" placeholder="Masukkan NIK Pasien" id="patientNikRecord"
              maxlength="16">
            <br>
            <button class="verify-btn" onclick="searchPatientRecord()">Cari Pasien</button>
          </div>

          <div class="illustration">
            <div class="card-icon">
              <svg viewBox="0 0 180 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="10" y="20" width="160" height="80" rx="8" fill="#E0F7FA" stroke="#B2EBF2" stroke-width="2" />
                <rect x="20" y="35" width="60" height="4" rx="2" fill="#00BCD4" opacity="0.6" />
                <rect x="20" y="45" width="80" height="3" rx="1.5" fill="#455A64" opacity="0.4" />
                <rect x="20" y="52" width="70" height="3" rx="1.5" fill="#455A64" opacity="0.4" />
                <rect x="120" y="30" width="35" height="45" rx="4" fill="#B2EBF2" stroke="#00BCD4" stroke-width="1" />
                <rect x="20" y="65" width="20" height="15" rx="3" fill="#FFD54F" stroke="#FFA000" stroke-width="1" />
                <path d="M50 70 Q55 65 60 70 Q55 75 50 70" stroke="#00BCD4" stroke-width="1.5" fill="none"
                  opacity="0.7" />
                <path d="M65 70 Q70 65 75 70 Q70 75 65 70" stroke="#00BCD4" stroke-width="1.5" fill="none"
                  opacity="0.5" />
              </svg>
              <div class="scan-effect"></div>
            </div>
          </div>
        </div>

        <div class="features">
          <div class="feature">
            <svg class="feature-icon" viewBox="0 0 24 24">
              <path
                d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H11V21H5V3H13V9H21Z" />
            </svg>
            <span>Verifikasi NIK</span>
          </div>
          <div class="feature">
            <svg class="feature-icon" viewBox="0 0 24 24">
              <path
                d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z" />
            </svg>
            <span>Data Aman</span>
          </div>
          <div class="feature">
            <svg class="feature-icon" viewBox="0 0 24 24">
              <path
                d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z" />
            </svg>
            <span>Blockchain Ready</span>
          </div>
        </div>
      </div>

      <!-- Step 3: Medical Record Form Section -->
      <div id="recordFormSection" style="display: none;">
        <div class="header">
          <h1 class="title">Catat Rekam Medis Baru</h1>
          <div class="patient-header">
            <span class="patient-label">Pasien:</span>
            <span class="patient-name" id="recordPatientName">Budi Santoso</span>
          </div>
          <p class="subtitle">Setiap catatan akan menjadi bagian dari riwayat pasien yang permanen dan tidak dapat
            diubah.</p>
        </div>

        <form class="form-container" id="medicalForm">
          <div class="form-group">
            <label class="form-label" for="diagnosis">
              <svg class="label-icon" viewBox="0 0 24 24">
                <path
                  d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19Z" />
              </svg>
              Diagnosis
            </label>
            <input type="text" id="diagnosis" class="form-input" placeholder="Masukkan diagnosis pasien..." required>
          </div>

          <div class="form-group">
            <label class="form-label" for="treatment">
              <svg class="label-icon" viewBox="0 0 24 24">
                <path
                  d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M17,13H13V17H11V13H7V11H11V7H13V11H17V13Z" />
              </svg>
              Tindakan Medis
            </label>
            <textarea id="treatment" class="form-input form-textarea"
              placeholder="Deskripsikan tindakan medis yang dilakukan..." required></textarea>
          </div>

          <div class="form-group">
            <label class="form-label" for="prescription">
              <svg class="label-icon" viewBox="0 0 24 24">
                <path
                  d="M6,3A3,3 0 0,1 9,6C9,7.31 8.17,8.42 7.02,8.83L12,13.81L15.19,10.62C15.6,11.77 16.69,12.6 18,12.6A3,3 0 0,1 21,15.6C21,17.42 19.42,18.81 17.6,18.81C16.29,18.81 15.18,18.08 14.77,17.02L12,19.79L9.23,17.02C8.82,18.08 7.71,18.81 6.4,18.81C4.58,18.81 3,17.42 3,15.6A3,3 0 0,1 6,12.6C7.31,12.6 8.4,11.77 8.81,10.62L12,7.43L14.02,9.45C14.21,8.31 15.11,7.41 16.25,7.22L13.81,4.78C13.4,3.67 12.3,2.9 11,2.9A3,3 0 0,1 6,3Z" />
              </svg>
              Resep Obat
            </label>
            <textarea id="prescription" class="form-input form-textarea"
              placeholder="Tuliskan resep obat dan dosis yang diberikan..." required></textarea>
          </div>

          <div class="submit-section">
            <button type="submit" class="submit-btn" id="submitBtn">
              <svg class="blockchain-icon" viewBox="0 0 24 24">
                <path
                  d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z" />
              </svg>
              Simpan & Catat di Blockchain
            </button>

            <div class="status-indicator" id="statusIndicator">
              <div class="spinner" id="spinner"></div>
              <span id="statusText">Sedang memproses transaksi...</span>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="action-btn secondary-btn" onclick="backToNikInput()">Kembali ke Input
              NIK</button>
          </div>
        </form>

        <div class="security-note">
          <svg class="security-icon" viewBox="0 0 24 24">
            <path
              d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z" />
          </svg>
          <div class="security-text">
            <strong>Keamanan Terjamin:</strong> Semua data rekam medis akan disimpan secara permanen dalam blockchain
            yang terenkripsi dan tidak dapat diubah oleh pihak manapun.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Identification Page -->
  <div id="identificationPage" class="page-content">
    <div class="container">
      <div class="header">
        <h1 class="title">Akses Medis Cepat (UGD)</h1>
        <p class="subtitle">Verifikasi identitas pasien dalam hitungan detik. Cukup masukkan NIK atau lakukan pemindaian
          e-KTP.</p>
      </div>

      <div class="main-content">
        <div class="input-section">
          <input type="text" class="input-field" placeholder="Masukkan NIK/ID Pasien" id="patientIdNav">
          <br>
          <button class="verify-btn" onclick="verifyPatientNav()">Verifikasi</button>
        </div>

        <div class="illustration">
          <div class="card-icon">
            <svg viewBox="0 0 180 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="10" y="20" width="160" height="80" rx="8" fill="#E0F7FA" stroke="#B2EBF2" stroke-width="2" />
              <rect x="20" y="35" width="60" height="4" rx="2" fill="#00BCD4" opacity="0.6" />
              <rect x="20" y="45" width="80" height="3" rx="1.5" fill="#455A64" opacity="0.4" />
              <rect x="20" y="52" width="70" height="3" rx="1.5" fill="#455A64" opacity="0.4" />
              <rect x="120" y="30" width="35" height="45" rx="4" fill="#B2EBF2" stroke="#00BCD4" stroke-width="1" />
              <rect x="20" y="65" width="20" height="15" rx="3" fill="#FFD54F" stroke="#FFA000" stroke-width="1" />
              <path d="M50 70 Q55 65 60 70 Q55 75 50 70" stroke="#00BCD4" stroke-width="1.5" fill="none"
                opacity="0.7" />
              <path d="M65 70 Q70 65 75 70 Q70 75 65 70" stroke="#00BCD4" stroke-width="1.5" fill="none"
                opacity="0.5" />
            </svg>
            <div class="scan-effect"></div>
          </div>
        </div>
      </div>

      <div class="features">
        <div class="feature">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H11V21H5V3H13V9H21Z" />
          </svg>
          <span>Verifikasi Instan</span>
        </div>
        <div class="feature">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z" />
          </svg>
          <span>Data Aman</span>
        </div>
        <div class="feature">
          <svg class="feature-icon" viewBox="0 0 24 24">
            <path
              d="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" />
          </svg>
          <span>Akses 24/7</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Emergency Page -->
  <div id="emergencyPage" class="page-content" style="display: none;">
    <div class="container">
      <div class="header">
        <h1 class="title">Data Medis Darurat</h1>
        <p class="subtitle">Informasi vital tersedia seketika untuk penanganan yang akurat.</p>
      </div>

      <div class="data-card">
        <div class="emergency-indicator">DARURAT</div>

        <div class="patient-info">
          <div class="info-row">
            <div class="info-label">
              <svg class="icon" viewBox="0 0 24 24">
                <path
                  d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
              </svg>
              Nama:
            </div>
            <div class="info-value">Budi Santoso</div>
          </div>

          <div class="info-row">
            <div class="info-label">
              <svg class="icon" viewBox="0 0 24 24">
                <path
                  d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M17,12C17,14.76 14.76,17 12,17C9.24,17 7,14.76 7,12C7,9.24 9.24,7 12,7C14.76,7 17,9.24 17,12Z" />
              </svg>
              Golongan Darah:
            </div>
            <div class="info-value">
              <span class="blood-type">A+</span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-label">
              <svg class="icon" viewBox="0 0 24 24">
                <path
                  d="M21,9C21,5.58 18.42,3 15,3C13.76,3 12.64,3.5 11.86,4.29C11.5,4.65 11.5,5.22 11.86,5.58L15.44,9.17C15.8,9.53 16.37,9.53 16.73,9.17C17.5,8.4 18,7.28 18,6C18,4.34 16.66,3 15,3C13.34,3 12,4.34 12,6V9H21M12,11V21H21V11H12Z" />
              </svg>
              Alergi Obat Utama:
            </div>
            <div class="info-value">
              <span class="allergy-value">Penicillin</span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-label">
              <svg class="icon" viewBox="0 0 24 24">
                <path
                  d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19Z" />
              </svg>
              Penyakit Kritis:
            </div>
            <div class="info-value critical-value">Diabetes Tipe 2</div>
          </div>
        </div>

        <div class="verification-badge">
          <svg class="blockchain-icon" viewBox="0 0 24 24">
            <path
              d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z" />
          </svg>
          Terverifikasi oleh Blockchain
        </div>
      </div>

      <div class="action-buttons">
        <button class="action-btn" onclick="showPage('history')">Lihat Riwayat Lengkap</button>
        <button class="action-btn secondary-btn" onclick="printDataNav()">Cetak Data</button>
        <button class="action-btn" onclick="contactDoctorNav()">Hubungi Dokter</button>
        <button class="action-btn" onclick="showUGDForm()"
          style="background: linear-gradient(135deg, #FF5722 0%, #D32F2F 100%); box-shadow: 0 4px 15px rgba(255, 87, 34, 0.3);">Daftarkan
          ke UGD</button>
      </div>
    </div>
  </div>

  <!-- UGD Registration Form Page -->
  <div id="ugdFormPage" class="page-content" style="display: none;">
    <div class="container">
      <div class="header">
        <h1 class="title">Pendaftaran UGD</h1>
        <div class="patient-header">
          <span class="patient-label">Pasien:</span>
          <span class="patient-name" id="ugdPatientName">Budi Santoso</span>
        </div>
        <p class="subtitle">Lengkapi data untuk pendaftaran Unit Gawat Darurat. Data akan otomatis tercatat dalam
          riwayat medis pasien.</p>
      </div>

      <form class="form-container" id="ugdForm">
        <div class="form-group">
          <label class="form-label" for="ugdDoctor">
            <svg class="label-icon" viewBox="0 0 24 24">
              <path
                d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
            </svg>
            Dokter yang Menangani
          </label>
          <select id="ugdDoctor" class="form-input" required>
            <option value="">Pilih Dokter UGD</option>
            <option value="Dr. Ahmad Wijaya, Sp.EM">Dr. Ahmad Wijaya, Sp.EM</option>
            <option value="Dr. Sari Indrawati, Sp.PD">Dr. Sari Indrawati, Sp.PD</option>
            <option value="Dr. Budi Hartono, Sp.B">Dr. Budi Hartono, Sp.B</option>
            <option value="Dr. Maya Sari, Sp.A">Dr. Maya Sari, Sp.A</option>
            <option value="Dr. Rizki Pratama, Sp.JP">Dr. Rizki Pratama, Sp.JP</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label" for="ugdComplaint">
            <svg class="label-icon" viewBox="0 0 24 24">
              <path
                d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />
            </svg>
            Keluhan Utama
          </label>
          <textarea id="ugdComplaint" class="form-input form-textarea"
            placeholder="Deskripsikan keluhan utama pasien..." required></textarea>
        </div>

        <div class="form-group">
          <label class="form-label" for="ugdVitalSigns">
            <svg class="label-icon" viewBox="0 0 24 24">
              <path
                d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M17,12C17,14.76 14.76,17 12,17C9.24,17 7,14.76 7,12C7,9.24 9.24,7 12,7C14.76,7 17,9.24 17,12Z" />
            </svg>
            Tanda Vital
          </label>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <input type="text" class="form-input" placeholder="Tekanan Darah (mmHg)" id="bloodPressure">
            <input type="text" class="form-input" placeholder="Nadi (bpm)" id="pulse">
            <input type="text" class="form-input" placeholder="Suhu (Â°C)" id="temperature">
            <input type="text" class="form-input" placeholder="Saturasi O2 (%)" id="oxygen">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="ugdPriority">
            <svg class="label-icon" viewBox="0 0 24 24">
              <path d="M12,2L13.09,8.26L22,9L13.09,9.74L12,16L10.91,9.74L2,9L10.91,8.26L12,2Z" />
            </svg>
            Tingkat Prioritas
          </label>
          <select id="ugdPriority" class="form-input" required>
            <option value="">Pilih Tingkat Prioritas</option>
            <option value="Merah - Resusitasi" style="color: #D32F2F; font-weight: bold;">ðŸ”´ Merah - Resusitasi (Segera)
            </option>
            <option value="Kuning - Urgent" style="color: #F57C00; font-weight: bold;">ðŸŸ¡ Kuning - Urgent (10 menit)
            </option>
            <option value="Hijau - Semi Urgent" style="color: #388E3C; font-weight: bold;">ðŸŸ¢ Hijau - Semi Urgent (30
              menit)</option>
            <option value="Biru - Non Urgent" style="color: #1976D2; font-weight: bold;">ðŸ”µ Biru - Non Urgent (60 menit)
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label" for="ugdDiagnosis">
            <svg class="label-icon" viewBox="0 0 24 24">
              <path
                d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19Z" />
            </svg>
            Diagnosis Awal UGD
          </label>
          <textarea id="ugdDiagnosis" class="form-input form-textarea"
            placeholder="Masukkan diagnosis awal berdasarkan pemeriksaan UGD..." required></textarea>
        </div>

        <div class="form-group">
          <label class="form-label" for="ugdTreatment">
            <svg class="label-icon" viewBox="0 0 24 24">
              <path
                d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M17,13H13V17H11V13H7V11H11V7H13V11H17V13Z" />
            </svg>
            Tindakan yang Diberikan
          </label>
          <textarea id="ugdTreatment" class="form-input form-textarea"
            placeholder="Deskripsikan tindakan medis yang diberikan di UGD..." required></textarea>
        </div>

        <div class="submit-section">
          <button type="submit" class="submit-btn" id="ugdSubmitBtn">
            <svg class="blockchain-icon" viewBox="0 0 24 24">
              <path
                d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z" />
            </svg>
            Daftarkan ke UGD & Simpan ke Blockchain
          </button>

          <div class="status-indicator" id="ugdStatusIndicator">
            <div class="spinner" id="ugdSpinner"></div>
            <span id="ugdStatusText">Sedang memproses pendaftaran UGD...</span>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="action-btn secondary-btn" onclick="backToEmergencyData()">Kembali ke Data
            Darurat</button>
        </div>
      </form>

      <div class="security-note">
        <svg class="security-icon" viewBox="0 0 24 24">
          <path
            d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z" />
        </svg>
        <div class="security-text">
          <strong>Pendaftaran UGD Otomatis:</strong> Data pendaftaran akan otomatis tercatat dalam riwayat medis pasien
          dan tersimpan secara permanen dalam blockchain untuk referensi medis selanjutnya.
        </div>
      </div>
    </div>
  </div>

  <!-- History Page -->
  <div id="historyPage" class="page-content" style="display: none;">
    <div class="container" style="max-width: 900px;">
      <!-- Patient Verification Section -->
      <div id="historyVerificationSection">
        <div class="header">
          <h1 class="title">Riwayat Medis Pasien</h1>
          <p class="subtitle">Masukkan NIK pasien untuk mengakses riwayat medis lengkap yang tersimpan dalam blockchain.
          </p>
        </div>

        <div class="main-content">
          <div class="input-section">
            <input type="text" class="input-field" placeholder="Masukkan NIK Pasien" id="patientNikHistory">
            <br>
            <button class="verify-btn" onclick="verifyPatientHistory()">Verifikasi NIK</button>
          </div>

          <div class="illustration">
            <div class="card-icon">
              <svg viewBox="0 0 180 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="10" y="20" width="160" height="80" rx="8" fill="#E8F5E9" stroke="#C8E6C9" stroke-width="2" />
                <rect x="20" y="35" width="60" height="4" rx="2" fill="#2E7D32" opacity="0.6" />
                <rect x="20" y="45" width="80" height="3" rx="1.5" fill="#455A64" opacity="0.4" />
                <rect x="20" y="52" width="70" height="3" rx="1.5" fill="#455A64" opacity="0.4" />
                <rect x="120" y="30" width="35" height="45" rx="4" fill="#C8E6C9" stroke="#2E7D32" stroke-width="1" />
                <circle cx="30" cy="72" r="8" fill="#FFD54F" stroke="#FFA000" stroke-width="1" />
                <path d="M50 70 Q55 65 60 70 Q55 75 50 70" stroke="#2E7D32" stroke-width="1.5" fill="none"
                  opacity="0.7" />
                <path d="M65 70 Q70 65 75 70 Q70 75 65 70" stroke="#2E7D32" stroke-width="1.5" fill="none"
                  opacity="0.5" />
              </svg>
              <div class="scan-effect"></div>
            </div>
          </div>
        </div>

        <div class="features">
          <div class="feature">
            <svg class="feature-icon" viewBox="0 0 24 24">
              <path
                d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3" />
            </svg>
            <span>Riwayat Lengkap</span>
          </div>
          <div class="feature">
            <svg class="feature-icon" viewBox="0 0 24 24">
              <path
                d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z" />
            </svg>
            <span>Blockchain Verified</span>
          </div>
          <div class="feature">
            <svg class="feature-icon" viewBox="0 0 24 24">
              <path
                d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z" />
            </svg>
            <span>Data Aman</span>
          </div>
        </div>
      </div>

      <!-- Medical History Timeline Section (Hidden Initially) -->
      <div id="historyTimelineSection" style="display: none;">
        <div class="header">
          <h1 class="title">Riwayat Medis Pasien</h1>
          <p class="subtitle" style="font-size: 1.2rem; color: #00BCD4; font-weight: 500;" id="patientNameDisplay">
            Untuk: Budi Santoso</p>
          <p class="subtitle">Berikut adalah seluruh riwayat kesehatan pasien, tersimpan secara permanen dalam rantai
            yang tidak dapat diubah.</p>
        </div>

        <div class="timeline-container">
          <!-- Timeline Line -->
          <div class="timeline-line"></div>

          <!-- Record Card 1 - Latest UGD Entry -->
          <div class="record-card" style="border-left: 4px solid #FF5722;">
            <div class="timeline-dot" style="background: #FF5722;"></div>
            <div class="card-content">
              <div class="record-date">Tanggal: 15 Oktober 2025</div>
              <div class="record-institution">Institusi: UGD RSUD Maju Jaya</div>
              <div class="record-summary">
                <strong>Ringkasan UGD:</strong> Keluhan: Nyeri dada akut, Prioritas: ðŸŸ¡ Kuning - Urgent, Dokter: Dr.
                Ahmad Wijaya, Sp.EM, Diagnosis: Angina Pektoris, Tindakan: EKG, Oksigen, Observasi
              </div>
              <div class="record-hash">
                <div class="hash-label">Hash Unik (Sidik Jari Digital):</div>
                <div class="hash-code">d1e5f8a2b6c9d3e7f0a4b8c1d5e9f2a6b0c4d8e1f5a9b3c7d0e4f8a2b6c0d4e8</div>
              </div>
            </div>
          </div>

          <!-- Record Card 2 -->
          <div class="record-card">
            <div class="timeline-dot"></div>
            <div class="card-content">
              <div class="record-date">Tanggal: 28 September 2025</div>
              <div class="record-institution">Institusi: RSUD Maju Jaya</div>
              <div class="record-summary">
                <strong>Ringkasan:</strong> Diagnosis: Demam Berdarah Dengue, Tindakan Medis: Rawat Inap 3 hari, Terapi
                Cairan
              </div>
              <div class="record-hash">
                <div class="hash-label">Hash Unik (Sidik Jari Digital):</div>
                <div class="hash-code">a7f3b2c8d9e1f4a6b8c2d5e7f9a1b3c4d6e8f0a2b4c6d8e0f2a4b6c8d0e2f4a6</div>
              </div>
            </div>
          </div>

          <!-- Record Card 3 -->
          <div class="record-card">
            <div class="timeline-dot"></div>
            <div class="card-content">
              <div class="record-date">Tanggal: 15 Mei 2025</div>
              <div class="record-institution">Institusi: Puskesmas Sehat Sejahtera</div>
              <div class="record-summary">
                <strong>Ringkasan:</strong> Vaksinasi Influenza, Pemeriksaan Rutin Diabetes, Konsultasi Gizi
              </div>
              <div class="record-hash">
                <div class="hash-label">Hash Unik (Sidik Jari Digital):</div>
                <div class="hash-code">b8e4c3d0f1a5b7c9d2e6f8a0b3c5d7e9f1a3b5c7d9e1f3a5b7c9d1e3f5a7b9</div>
              </div>
            </div>
          </div>

          <!-- Record Card 4 -->
          <div class="record-card">
            <div class="timeline-dot"></div>
            <div class="card-content">
              <div class="record-date">Tanggal: 10 Januari 2025</div>
              <div class="record-institution">Institusi: Klinik Medika Prima</div>
              <div class="record-summary">
                <strong>Ringkasan:</strong> Pendaftaran Awal Sistem, Golongan Darah: A+, Pemeriksaan Kesehatan Umum
              </div>
              <div class="record-hash">
                <div class="hash-label">Hash Unik (Sidik Jari Digital):</div>
                <div class="hash-code">c9f5d4e1a6b8c0d3e7f9a2b4c6d8e0f2a4b6c8d0e2f4a6b8c0d2e4f6a8b0c2</div>
              </div>
            </div>
          </div>
        </div>

        <div class="history-actions">
          <button class="action-btn" onclick="exportHistoryNav()">Ekspor Riwayat</button>
          <button class="action-btn secondary-btn" onclick="printHistoryNav()">Cetak Riwayat</button>
          <button class="action-btn" onclick="shareHistoryNav()">Bagikan ke Dokter</button>
          <button class="action-btn secondary-btn" onclick="backToVerification()">Cari Pasien Lain</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Patient Confirmation Modal -->
  <div id="patientConfirmModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Konfirmasi Identitas Pasien</h2>
        <p class="modal-subtitle">Pastikan data berikut sudah sesuai.</p>
      </div>

      <div class="patient-preview">
        <div class="preview-row">
          <span class="preview-label">Nama:</span>
          <span class="preview-value" id="previewName">Budi Santoso</span>
        </div>
        <div class="preview-row">
          <span class="preview-label">NIK:</span>
          <span class="preview-value" id="previewNik">3201234567890123</span>
        </div>
        <div class="preview-row">
          <span class="preview-label">Tanggal Lahir:</span>
          <span class="preview-value" id="previewBirthDate">15 Maret 1985</span>
        </div>
        <div class="preview-row">
          <span class="preview-label">Alamat:</span>
          <span class="preview-value" id="previewAddress">Jl. Merdeka No. 123, Jakarta Pusat</span>
        </div>
      </div>

      <div class="modal-actions">
        <button class="modal-btn cancel-btn" onclick="closePatientModal()">Batal</button>
        <button class="modal-btn confirm-btn" onclick="confirmPatientData()">Konfirmasi</button>
      </div>
    </div>
  </div>

  <!-- Record Patient Confirmation Modal -->
  <div id="recordPatientModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Konfirmasi Identitas Pasien</h2>
        <p class="modal-subtitle">Pastikan data berikut sudah sesuai.</p>
      </div>

      <div class="patient-preview">
        <div class="preview-row">
          <span class="preview-label">Nama:</span>
          <span class="preview-value" id="recordPreviewName">Budi Santoso</span>
        </div>
        <div class="preview-row">
          <span class="preview-label">NIK:</span>
          <span class="preview-value" id="recordPreviewNik">3201234567890123</span>
        </div>
        <div class="preview-row">
          <span class="preview-label">Tanggal Lahir:</span>
          <span class="preview-value" id="recordPreviewBirthDate">15 Maret 1985</span>
        </div>
        <div class="preview-row">
          <span class="preview-label">Alamat:</span>
          <span class="preview-value" id="recordPreviewAddress">Jl. Merdeka No. 123, Jakarta Pusat</span>
        </div>
      </div>

      <div class="modal-actions">
        <button class="modal-btn cancel-btn" onclick="closeRecordPatientModal()">Batal</button>
        <button class="modal-btn confirm-btn" onclick="confirmRecordPatientData()">Konfirmasi</button>
      </div>
    </div>
  </div>

  <script>
    // Navigation functions
    function showPage(pageId) {
      // Hide all page contents
      document.getElementById('recordPage').style.display = 'none';
      document.getElementById('identificationPage').style.display = 'none';
      document.getElementById('emergencyPage').style.display = 'none';
      document.getElementById('historyPage').style.display = 'none';
      document.getElementById('ugdFormPage').style.display = 'none';

      // Show selected page
      document.getElementById(pageId + 'Page').style.display = 'block';

      // Update active nav link
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });

      const activeLink = document.querySelector(`[onclick="showPage('${pageId}')"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
    }

    // Functions for identification page
    function verifyPatientNav() {
      const patientId = document.getElementById('patientIdNav').value.trim();

      if (!patientId) {
        alert('Silakan masukkan NIK atau ID Pasien');
        return;
      }

      if (patientId.length !== 16) {
        alert('NIK harus terdiri dari 16 digit');
        return;
      }

      // Simulate patient data lookup
      const patientData = {
        nik: patientId,
        name: 'Budi Santoso',
        birthDate: '15 Maret 1985',
        address: 'Jl. Merdeka No. 123, Jakarta Pusat'
      };

      // Update modal with patient data
      document.getElementById('previewName').textContent = patientData.name;
      document.getElementById('previewNik').textContent = patientData.nik;
      document.getElementById('previewBirthDate').textContent = patientData.birthDate;
      document.getElementById('previewAddress').textContent = patientData.address;

      // Show confirmation modal
      document.getElementById('patientConfirmModal').style.display = 'flex';
    }

    function confirmPatientFromIdentification() {
      // Close modal
      closePatientModal();

      // Auto navigate to emergency data page
      setTimeout(() => {
        document.getElementById('emergencyPage').style.display = 'block';
        document.getElementById('identificationPage').style.display = 'none';
        document.getElementById('patientIdNav').value = '';
      }, 500);
    }

    // Functions for emergency page
    function printDataNav() {
      const printContent = `
                DATA MEDIS DARURAT
                ==================
                
                Nama: Budi Santoso
                Golongan Darah: A+
                Alergi Obat Utama: Penicillin
                Penyakit Kritis: Diabetes Tipe 2
                
                Status: Terverifikasi oleh Blockchain
                Waktu Akses: ${new Date().toLocaleString('id-ID')}
            `;

      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
                <html>
                    <head><title>Data Medis Darurat</title></head>
                    <body style="font-family: monospace; padding: 20px;">
                        <pre>${printContent}</pre>
                    </body>
                </html>
            `);
      printWindow.print();
    }

    function contactDoctorNav() {
      alert('Menghubungkan dengan dokter jaga...\n\nDokter akan segera dihubungi untuk konsultasi darurat terkait kondisi pasien.');
    }

    // Functions for record page
    function searchPatientRecord() {
      const patientNik = document.getElementById('patientNikRecord').value.trim();

      if (!patientNik) {
        alert('Silakan masukkan NIK pasien');
        return;
      }

      if (patientNik.length !== 16) {
        alert('NIK harus terdiri dari 16 digit');
        return;
      }

      // Simulate patient data lookup
      const patientData = {
        nik: patientNik,
        name: 'Budi Santoso',
        birthDate: '15 Maret 1985',
        address: 'Jl. Merdeka No. 123, Jakarta Pusat'
      };

      // Update record modal with patient data
      document.getElementById('recordPreviewName').textContent = patientData.name;
      document.getElementById('recordPreviewNik').textContent = patientData.nik;
      document.getElementById('recordPreviewBirthDate').textContent = patientData.birthDate;
      document.getElementById('recordPreviewAddress').textContent = patientData.address;

      // Show confirmation modal
      document.getElementById('recordPatientModal').style.display = 'flex';
    }

    function closeRecordPatientModal() {
      document.getElementById('recordPatientModal').style.display = 'none';
    }

    function confirmRecordPatientData() {
      const patientName = document.getElementById('recordPreviewName').textContent;

      // Close modal
      closeRecordPatientModal();

      // Hide NIK section and show form section
      document.getElementById('recordNikSection').style.display = 'none';
      document.getElementById('recordFormSection').style.display = 'block';

      // Update patient name in form
      document.getElementById('recordPatientName').textContent = patientName;

      // Clear input
      document.getElementById('patientNikRecord').value = '';
    }

    function backToNikInput() {
      // Show NIK section and hide form section
      document.getElementById('recordNikSection').style.display = 'block';
      document.getElementById('recordFormSection').style.display = 'none';

      // Clear form
      document.getElementById('medicalForm').reset();
    }

    // Functions for history page
    function verifyPatientHistory() {
      const patientNik = document.getElementById('patientNikHistory').value.trim();

      if (!patientNik) {
        alert('Silakan masukkan NIK pasien');
        return;
      }

      if (patientNik.length !== 16) {
        alert('NIK harus terdiri dari 16 digit');
        return;
      }

      // Simulate patient data lookup
      const patientData = {
        nik: patientNik,
        name: 'Budi Santoso',
        birthDate: '15 Maret 1985',
        address: 'Jl. Merdeka No. 123, Jakarta Pusat'
      };

      // Update modal with patient data
      document.getElementById('previewName').textContent = patientData.name;
      document.getElementById('previewNik').textContent = patientData.nik;
      document.getElementById('previewBirthDate').textContent = patientData.birthDate;
      document.getElementById('previewAddress').textContent = patientData.address;

      // Show confirmation modal
      document.getElementById('patientConfirmModal').style.display = 'flex';
    }

    function closePatientModal() {
      document.getElementById('patientConfirmModal').style.display = 'none';
    }

    function confirmPatientData() {
      const patientName = document.getElementById('previewName').textContent;

      // Check which page we're on to determine action
      const currentPage = getCurrentActivePage();

      // Close modal
      closePatientModal();

      if (currentPage === 'identification') {
        // Navigate to emergency page
        setTimeout(() => {
          document.getElementById('emergencyPage').style.display = 'block';
          document.getElementById('identificationPage').style.display = 'none';
          document.getElementById('patientIdNav').value = '';
        }, 500);
      } else if (currentPage === 'history') {
        // Show history timeline
        document.getElementById('historyVerificationSection').style.display = 'none';
        document.getElementById('historyTimelineSection').style.display = 'block';

        // Update patient name in timeline
        document.getElementById('patientNameDisplay').textContent = `Untuk: ${patientName}`;

        // Clear input
        document.getElementById('patientNikHistory').value = '';
      }
    }

    // UGD Functions
    function showUGDForm() {
      const patientName = document.querySelector('#emergencyPage .patient-name, .info-value').textContent || 'Budi Santoso';

      // Hide emergency page and show UGD form
      document.getElementById('emergencyPage').style.display = 'none';
      document.getElementById('ugdFormPage').style.display = 'block';

      // Update patient name in UGD form
      document.getElementById('ugdPatientName').textContent = patientName;
    }

    function backToEmergencyData() {
      // Hide UGD form and show emergency page
      document.getElementById('ugdFormPage').style.display = 'none';
      document.getElementById('emergencyPage').style.display = 'block';

      // Clear UGD form
      document.getElementById('ugdForm').reset();
    }

    function getCurrentActivePage() {
      const pages = ['identificationPage', 'historyPage', 'recordPage', 'emergencyPage'];

      for (let pageId of pages) {
        const page = document.getElementById(pageId);
        if (page && page.style.display === 'block') {
          return pageId.replace('Page', '');
        }
      }

      // Check for default visible page (identification is default)
      const identificationPage = document.getElementById('identificationPage');
      if (identificationPage && identificationPage.style.display !== 'none') {
        return 'identification';
      }

      return 'identification'; // fallback
    }

    function backToVerification() {
      // Show verification section and hide timeline
      document.getElementById('historyVerificationSection').style.display = 'block';
      document.getElementById('historyTimelineSection').style.display = 'none';
    }

    function exportHistoryNav() {
      alert('Mengekspor riwayat medis...\n\nFile akan diunduh dalam format PDF yang aman dan terenkripsi untuk keperluan medis.');
    }

    function printHistoryNav() {
      const patientName = document.getElementById('patientNameDisplay').textContent.replace('Untuk: ', '');
      const printContent = `
                RIWAYAT MEDIS LENGKAP
                =====================
                Pasien: ${patientName}
                
                1. 28 September 2025 - RSUD Maju Jaya
                   Diagnosis: Demam Berdarah Dengue
                   Hash: a7f3b2c8d9e1f4a6b8c2d5e7f9a1b3c4...
                
                2. 15 Mei 2025 - Puskesmas Sehat Sejahtera
                   Vaksinasi Influenza & Pemeriksaan Diabetes
                   Hash: b8e4c3d0f1a5b7c9d2e6f8a0b3c5d7e9...
                
                3. 10 Januari 2025 - Klinik Medika Prima
                   Pendaftaran Awal, Golongan Darah: A+
                   Hash: c9f5d4e1a6b8c0d3e7f9a2b4c6d8e0f2...
                
                Dicetak: ${new Date().toLocaleString('id-ID')}
                Status: Terverifikasi Blockchain
            `;

      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
                <html>
                    <head><title>Riwayat Medis - ${patientName}</title></head>
                    <body style="font-family: monospace; padding: 20px;">
                        <pre>${printContent}</pre>
                    </body>
                </html>
            `);
      printWindow.print();
    }

    function shareHistoryNav() {
      alert('Berbagi riwayat dengan dokter...\n\nLink aman akan dikirim ke dokter yang dituju dengan akses terbatas dan terenkripsi.');
    }

    // Allow Enter key for navigation inputs
    document.addEventListener('DOMContentLoaded', function () {
      const navInput = document.getElementById('patientIdNav');
      if (navInput) {
        navInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            verifyPatientNav();
          }
        });

        // Add input validation for NIK
        navInput.addEventListener('input', function (e) {
          // Only allow numbers
          this.value = this.value.replace(/[^0-9]/g, '');
          // Limit to 16 digits
          if (this.value.length > 16) {
            this.value = this.value.slice(0, 16);
          }
        });
      }

      const historyInput = document.getElementById('patientNikHistory');
      if (historyInput) {
        historyInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            verifyPatientHistory();
          }
        });

        // Add input validation for NIK
        historyInput.addEventListener('input', function (e) {
          // Only allow numbers
          this.value = this.value.replace(/[^0-9]/g, '');
          // Limit to 16 digits
          if (this.value.length > 16) {
            this.value = this.value.slice(0, 16);
          }
        });
      }

      const recordInput = document.getElementById('patientNikRecord');
      if (recordInput) {
        recordInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            searchPatientRecord();
          }
        });

        // Add input validation for NIK
        recordInput.addEventListener('input', function (e) {
          // Only allow numbers
          this.value = this.value.replace(/[^0-9]/g, '');
          // Limit to 16 digits
          if (this.value.length > 16) {
            this.value = this.value.slice(0, 16);
          }
        });
      }

      // Close modal when clicking outside
      const modal = document.getElementById('patientConfirmModal');
      if (modal) {
        modal.addEventListener('click', function (e) {
          if (e.target === modal) {
            closePatientModal();
          }
        });
      }

      const recordModal = document.getElementById('recordPatientModal');
      if (recordModal) {
        recordModal.addEventListener('click', function (e) {
          if (e.target === recordModal) {
            closeRecordPatientModal();
          }
        });
      }
    });

    // Medical record form functionality
    document.getElementById('medicalForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const submitBtn = document.getElementById('submitBtn');
      const statusIndicator = document.getElementById('statusIndicator');
      const statusText = document.getElementById('statusText');
      const spinner = document.getElementById('spinner');

      // Get form data
      const diagnosis = document.getElementById('diagnosis').value;
      const treatment = document.getElementById('treatment').value;
      const prescription = document.getElementById('prescription').value;

      // Validate form
      if (!diagnosis || !treatment || !prescription) {
        alert('Mohon lengkapi semua field yang diperlukan');
        return;
      }

      // Show processing state
      submitBtn.disabled = true;
      submitBtn.textContent = 'Memproses...';
      statusIndicator.style.display = 'flex';
      statusIndicator.className = 'status-indicator status-processing';
      statusText.textContent = 'Sedang memproses transaksi...';
      spinner.style.display = 'block';

      // Simulate blockchain transaction
      setTimeout(() => {
        // Show success state
        statusIndicator.className = 'status-indicator status-success';
        statusText.textContent = 'Pencatatan berhasil!';
        spinner.style.display = 'none';

        // Add success icon
        statusIndicator.innerHTML = `
                    <svg class="status-icon" viewBox="0 0 24 24">
                        <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
                    </svg>
                    <span>Pencatatan berhasil disimpan di blockchain!</span>
                `;

        // Reset form after success
        setTimeout(() => {
          document.getElementById('medicalForm').reset();
          submitBtn.disabled = false;
          submitBtn.innerHTML = `
                        <svg class="blockchain-icon" viewBox="0 0 24 24">
                            <path d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z"/>
                        </svg>
                        Simpan & Catat di Blockchain
                    `;
          statusIndicator.style.display = 'none';

          // Show confirmation
          alert('Rekam medis berhasil disimpan!\n\nData telah tercatat secara permanen dalam blockchain dan dapat diakses untuk referensi medis selanjutnya.');
        }, 3000);

      }, 3000);
    });

    // UGD form functionality
    document.getElementById('ugdForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const ugdSubmitBtn = document.getElementById('ugdSubmitBtn');
      const ugdStatusIndicator = document.getElementById('ugdStatusIndicator');
      const ugdStatusText = document.getElementById('ugdStatusText');
      const ugdSpinner = document.getElementById('ugdSpinner');

      // Get form data
      const doctor = document.getElementById('ugdDoctor').value;
      const complaint = document.getElementById('ugdComplaint').value;
      const priority = document.getElementById('ugdPriority').value;
      const diagnosis = document.getElementById('ugdDiagnosis').value;
      const treatment = document.getElementById('ugdTreatment').value;

      // Validate form
      if (!doctor || !complaint || !priority || !diagnosis || !treatment) {
        alert('Mohon lengkapi semua field yang diperlukan');
        return;
      }

      // Show processing state
      ugdSubmitBtn.disabled = true;
      ugdSubmitBtn.textContent = 'Memproses Pendaftaran...';
      ugdStatusIndicator.style.display = 'flex';
      ugdStatusIndicator.className = 'status-indicator status-processing';
      ugdStatusText.textContent = 'Sedang memproses pendaftaran UGD...';
      ugdSpinner.style.display = 'block';

      // Simulate UGD registration and blockchain transaction
      setTimeout(() => {
        // Show success state
        ugdStatusIndicator.className = 'status-indicator status-success';
        ugdStatusText.textContent = 'Pendaftaran UGD berhasil!';
        ugdSpinner.style.display = 'none';

        // Add success icon
        ugdStatusIndicator.innerHTML = `
                    <svg class="status-icon" viewBox="0 0 24 24">
                        <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
                    </svg>
                    <span>Pendaftaran UGD berhasil & tercatat di blockchain!</span>
                `;

        // Reset form after success
        setTimeout(() => {
          document.getElementById('ugdForm').reset();
          ugdSubmitBtn.disabled = false;
          ugdSubmitBtn.innerHTML = `
                        <svg class="blockchain-icon" viewBox="0 0 24 24">
                            <path d="M6,2H18V8H18V8L14,12L18,16V16H18V22H6V16H6V16L10,12L6,8V8H6V2M16,16.5L12.5,13H7.5L11,16.5H16M16,7.5L11,11H7.5L12.5,7.5H16Z"/>
                        </svg>
                        Daftarkan ke UGD & Simpan ke Blockchain
                    `;
          ugdStatusIndicator.style.display = 'none';

          // Show confirmation
          alert(`Pendaftaran UGD berhasil!\n\nPasien: ${document.getElementById('ugdPatientName').textContent}\nDokter: ${doctor}\nPrioritas: ${priority}\n\nData telah tercatat secara permanen dalam blockchain dan riwayat medis pasien.`);

          // Auto navigate back to emergency data
          backToEmergencyData();
        }, 3000);

      }, 3000);
    });

    // Auto-resize textareas
    document.querySelectorAll('.form-textarea').forEach(textarea => {
      textarea.addEventListener('input', function () {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
      });
    });
  </script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98671e90b2cf252c',t:'MTc1OTEwMzE3OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>